{
  "hash": "f83eab26bfc7b1b3aa80a066bb00cfd9",
  "result": {
    "markdown": "---\ntitle: \"Forest\"\nauthor: \n    - name: \"Alejandro Morales Sierra\"\n      affiliation: \"Centre for Crop Systems Analysis - Wageningen University\"\ndate: last-modified\nexecute: \n  cache: true\n---\n\nIn this example we extend the tree example into a forest, where\neach tree is described by a separate graph object and parameters driving the\ngrowth of these trees vary across individuals following a predefined distribution.\nThis tutorial requires using the Distributions.jl package:\n\n::: {.cell execution_count=1}\n``` {.julia .cell-code}\nimport Pkg\nPkg.add(\"Distributions\")\nPkg.add(\"Plots\")\n```\n:::\n\n\nThe data types, rendering methods and growth rules are the same as in the binary\ntree example:\n\n::: {.cell execution_count=2}\n``` {.julia .cell-code}\nusing VPL\nusing Distributions, Plots\n# Data types\nmodule TreeTypes\n    import VPL\n    # Meristem\n    struct Meristem <: VPL.Node end\n    # Bud\n    struct Bud <: VPL.Node end\n    # Node\n    struct Node <: VPL.Node end\n    # BudNode\n    struct BudNode <: VPL.Node end\n    # Internode (needs to be mutable to allow for changes over time)\n    Base.@kwdef mutable struct Internode <: VPL.Node\n        length::Float64 = 0.10 # Internodes start at 10 cm\n    end\n    # Leaf\n    Base.@kwdef struct Leaf <: VPL.Node\n        length::Float64 = 0.20 # Leaves are 20 cm long\n        width::Float64  = 0.1 # Leaves are 10 cm wide\n    end    \n    # Graph-level variables\n    Base.@kwdef struct treeparams\n        growth::Float64 = 0.1   \n        budbreak::Float64 = 0.25\n        phyllotaxis::Float64 = 140.0\n        leaf_angle::Float64 = 30.0\n        branch_angle::Float64 = 45.0\n    end\nend\n\nimport .tree\n\n# Create geometry + color for the internodes\nfunction VPL.feed!(turtle::Turtle, i::TreeTypes.Internode, vars)\n    # Rotate turtle around the head to implement elliptical phyllotaxis\n    rh!(turtle, vars.phyllotaxis) \n    HollowCylinder!(turtle, length = i.length, height = i.length/15, width = i.length/15, \n                move = true, color = RGB(0.5,0.4,0.0))\n    return nothing\nend\n\n# Create geometry + color for the leaves\nfunction VPL.feed!(turtle::Turtle, l::TreeTypes.Leaf, vars)\n    # Rotate turtle around the arm for insertion angle\n    ra!(turtle, -vars.leaf_angle)\n    # Generate the leaf \n    Ellipse!(turtle, length = l.length, width = l.width, move = false, \n             color = RGB(0.2,0.6,0.2))\n    # Rotate turtle back to original direction\n    ra!(turtle, vars.leaf_angle)\n    return nothing\nend\n\n# Insertion angle for the bud nodes\nfunction VPL.feed!(turtle::Turtle, b::TreeTypes.BudNode, vars)\n    # Rotate turtle around the arm for insertion angle\n    ra!(turtle, -vars.branch_angle)\nend\n\n\n# Rules\nmeristem_rule = Rule(TreeTypes.Meristem, rhs = mer -> TreeTypes.Node() + \n                                              (TreeTypes.Bud(), TreeTypes.Leaf()) +\n                                         TreeTypes.Internode() + TreeTypes.Meristem())\n\nfunction prob_break(bud)\n    # We move to parent node in the branch where the bud was created\n    node =  parent(bud)\n    # We count the number of internodes between node and the first Meristem \n    # moving down the graph\n    check, steps = hasDescendent(node, condition = n -> data(n) isa TreeTypes.Meristem)\n    steps = Int(ceil(steps/2)) # Because it will count both the nodes and the internodes\n    # Compute probability of bud break and determine whether it happens\n    if check\n        prob =  min(1.0, steps*vars(bud).budbreak)\n        return rand() < prob\n    # If there is no meristem, an error happened since the model does not allow for this    \n    else\n        error(\"No meristem found in branch\")\n    end\nend\nbranch_rule = Rule(TreeTypes.Bud, \n            lhs = prob_break, \n            rhs = bud -> TreeTypes.BudNode() + TreeTypes.Internode() + TreeTypes.Meristem())\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWARNING: could not import Main.tree into Main\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=2}\n```\nRule replacing nodes of type Main.TreeTypes.Bud without context capturing.\n```\n:::\n:::\n\n\nThe main difference with respect to the tree is that several of the parameters\nwill vary per TreeTypes. Also, the location of the tree and initial orientation of \nthe turtle will also vary. To achieve this we need to:\n\n(i) Add two additional initial nodes that move the turtle to the starting position\nof each tree and rotates it.\n\n(ii) Wrap the axiom, rules and the creation of the graph into a function that \ntakes the required parameters as inputs.\n\n::: {.cell execution_count=3}\n``` {.julia .cell-code}\nfunction create_tree(origin, growth, budbreak, orientation)\n    axiom = T(origin) + RH(orientation) + TreeTypes.Internode() + TreeTypes.Meristem()\n    tree =  Graph(axiom = axiom, rules = (meristem_rule, branch_rule), \n                  vars = TreeTypes.treeparams(growth = growth, budbreak = budbreak))\n    return tree\nend\n```\n\n::: {.cell-output .cell-output-display execution_count=3}\n```\ncreate_tree (generic function with 1 method)\n```\n:::\n:::\n\n\nThe code for elongating the internodes to simulate growth remains the same as for\nthe binary tree example\n\n::: {.cell execution_count=4}\n``` {.julia .cell-code}\ngetInternode = Query(TreeTypes.Internode)\n\nfunction elongate!(tree, query)\n    for x in apply(tree, query)\n        x.length = x.length*(1.0 + vars(tree).growth)\n    end\nend\n\nfunction growth!(tree, query)\n    elongate!(tree, query)\n    rewrite!(tree)\nend\n\nfunction simulate(tree, query, nsteps)\n    new_tree = deepcopy(tree)\n    for i in 1:nsteps\n        growth!(new_tree, query)\n    end\n    return new_tree\nend\n```\n\n::: {.cell-output .cell-output-display execution_count=4}\n```\nsimulate (generic function with 1 method)\n```\n:::\n:::\n\n\nLet's simulate a forest of 10 x 10 trees with a distance between (and within) rows\nof 2 meters. First we generate the original positions of the trees. For the \nposition we just need to pass a `Vec` object with the x, y, and z coordinates of \nthe location of each TreeTypes. The code below will generate a matrix with the coordinates:\n\n::: {.cell execution_count=5}\n``` {.julia .cell-code}\norigins = [Vec(i,j,0) for i = 1:2.0:20.0, j = 1:2.0:20.0]\n```\n\n::: {.cell-output .cell-output-display execution_count=5}\n```\n10×10 Matrix{StaticArraysCore.SVector{3, Float64}}:\n [1.0, 1.0, 0.0]   [1.0, 3.0, 0.0]   [1.0, 5.0, 0.0]   …  [1.0, 19.0, 0.0]\n [3.0, 1.0, 0.0]   [3.0, 3.0, 0.0]   [3.0, 5.0, 0.0]      [3.0, 19.0, 0.0]\n [5.0, 1.0, 0.0]   [5.0, 3.0, 0.0]   [5.0, 5.0, 0.0]      [5.0, 19.0, 0.0]\n [7.0, 1.0, 0.0]   [7.0, 3.0, 0.0]   [7.0, 5.0, 0.0]      [7.0, 19.0, 0.0]\n [9.0, 1.0, 0.0]   [9.0, 3.0, 0.0]   [9.0, 5.0, 0.0]      [9.0, 19.0, 0.0]\n [11.0, 1.0, 0.0]  [11.0, 3.0, 0.0]  [11.0, 5.0, 0.0]  …  [11.0, 19.0, 0.0]\n [13.0, 1.0, 0.0]  [13.0, 3.0, 0.0]  [13.0, 5.0, 0.0]     [13.0, 19.0, 0.0]\n [15.0, 1.0, 0.0]  [15.0, 3.0, 0.0]  [15.0, 5.0, 0.0]     [15.0, 19.0, 0.0]\n [17.0, 1.0, 0.0]  [17.0, 3.0, 0.0]  [17.0, 5.0, 0.0]     [17.0, 19.0, 0.0]\n [19.0, 1.0, 0.0]  [19.0, 3.0, 0.0]  [19.0, 5.0, 0.0]     [19.0, 19.0, 0.0]\n```\n:::\n:::\n\n\nWe may assume that the initial orientation is uniformly distributed between 0 and 360 degrees:\n\n::: {.cell execution_count=6}\n``` {.julia .cell-code}\norientations = [rand()*360.0 for i = 1:2.0:20.0, j = 1:2.0:20.0]\n```\n\n::: {.cell-output .cell-output-display execution_count=6}\n```\n10×10 Matrix{Float64}:\n 222.364    56.1871   73.6958   211.862  …  130.115    344.038    32.8873\n 154.005   335.147   169.658    145.118     349.254    352.288   266.972\n  68.072   176.615    24.559    255.41       77.6074   147.983   221.462\n 279.666   199.964    11.9299   213.552     319.111    343.475    31.4013\n 204.262   132.813   290.499    228.254      12.5165   318.611   314.992\n 238.702    39.1609  184.871    254.784  …   55.7255   344.87     29.7259\n  84.3218   90.7604  245.653    351.928       7.75052  181.514   221.39\n  47.6947   63.7208   11.6989   253.712     222.514     76.2133  344.47\n 142.708   334.947    17.3572   156.411     328.684    307.71    359.628\n 212.032    31.1857    7.74511  204.149     108.154    290.019   266.78\n```\n:::\n:::\n\n\nFor the `growth` and `budbreak` parameters we will assumed that they follow a \nLogNormal and Beta distribution, respectively. We can generate random\nvalues from these distributions using the `Distributions` package. For the\nrelative growth rate:\n\n::: {.cell execution_count=7}\n``` {.julia .cell-code}\ngrowths = rand(LogNormal(-2, 0.3), 10, 10)\nhistogram(vec(growths))\n```\n\n::: {.cell-output .cell-output-display execution_count=7}\n```{=html}\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"672\" height=\"480\" viewBox=\"0 0 2688 1920\">\n<defs>\n  <clipPath id=\"clip000\">\n    <rect x=\"0\" y=\"0\" width=\"2688\" height=\"1920\"/>\n  </clipPath>\n</defs>\n<path clip-path=\"url(#clip000)\" d=\"M0 1920 L2688 1920 L2688 0 L0 0  Z\" fill=\"#ffffff\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<defs>\n  <clipPath id=\"clip001\">\n    <rect x=\"537\" y=\"0\" width=\"1883\" height=\"1883\"/>\n  </clipPath>\n</defs>\n<path clip-path=\"url(#clip000)\" d=\"M143.576 1800.78 L2640.76 1800.78 L2640.76 47.2441 L143.576 47.2441  Z\" fill=\"#ffffff\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<defs>\n  <clipPath id=\"clip002\">\n    <rect x=\"143\" y=\"47\" width=\"2498\" height=\"1755\"/>\n  </clipPath>\n</defs>\n<polyline clip-path=\"url(#clip002)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none\" points=\"179.903,1800.78 179.903,47.2441 \"/>\n<polyline clip-path=\"url(#clip002)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none\" points=\"685.012,1800.78 685.012,47.2441 \"/>\n<polyline clip-path=\"url(#clip002)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none\" points=\"1190.12,1800.78 1190.12,47.2441 \"/>\n<polyline clip-path=\"url(#clip002)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none\" points=\"1695.23,1800.78 1695.23,47.2441 \"/>\n<polyline clip-path=\"url(#clip002)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none\" points=\"2200.34,1800.78 2200.34,47.2441 \"/>\n<polyline clip-path=\"url(#clip000)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"143.576,1800.78 2640.76,1800.78 \"/>\n<polyline clip-path=\"url(#clip000)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"179.903,1800.78 179.903,1781.88 \"/>\n<polyline clip-path=\"url(#clip000)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"685.012,1800.78 685.012,1781.88 \"/>\n<polyline clip-path=\"url(#clip000)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"1190.12,1800.78 1190.12,1781.88 \"/>\n<polyline clip-path=\"url(#clip000)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"1695.23,1800.78 1695.23,1781.88 \"/>\n<polyline clip-path=\"url(#clip000)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"2200.34,1800.78 2200.34,1781.88 \"/>\n<path clip-path=\"url(#clip000)\" d=\"M142.704 1834 Q139.093 1834 137.264 1837.57 Q135.459 1841.11 135.459 1848.24 Q135.459 1855.34 137.264 1858.91 Q139.093 1862.45 142.704 1862.45 Q146.338 1862.45 148.144 1858.91 Q149.973 1855.34 149.973 1848.24 Q149.973 1841.11 148.144 1837.57 Q146.338 1834 142.704 1834 M142.704 1830.3 Q148.514 1830.3 151.57 1834.9 Q154.649 1839.49 154.649 1848.24 Q154.649 1856.96 151.57 1861.57 Q148.514 1866.15 142.704 1866.15 Q136.894 1866.15 133.815 1861.57 Q130.76 1856.96 130.76 1848.24 Q130.76 1839.49 133.815 1834.9 Q136.894 1830.3 142.704 1830.3 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M162.866 1859.6 L167.75 1859.6 L167.75 1865.48 L162.866 1865.48 L162.866 1859.6 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M187.935 1834 Q184.324 1834 182.496 1837.57 Q180.69 1841.11 180.69 1848.24 Q180.69 1855.34 182.496 1858.91 Q184.324 1862.45 187.935 1862.45 Q191.57 1862.45 193.375 1858.91 Q195.204 1855.34 195.204 1848.24 Q195.204 1841.11 193.375 1837.57 Q191.57 1834 187.935 1834 M187.935 1830.3 Q193.746 1830.3 196.801 1834.9 Q199.88 1839.49 199.88 1848.24 Q199.88 1856.96 196.801 1861.57 Q193.746 1866.15 187.935 1866.15 Q182.125 1866.15 179.047 1861.57 Q175.991 1856.96 175.991 1848.24 Q175.991 1839.49 179.047 1834.9 Q182.125 1830.3 187.935 1830.3 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M208.144 1830.92 L226.5 1830.92 L226.5 1834.86 L212.426 1834.86 L212.426 1843.33 Q213.445 1842.98 214.463 1842.82 Q215.482 1842.64 216.5 1842.64 Q222.287 1842.64 225.667 1845.81 Q229.046 1848.98 229.046 1854.4 Q229.046 1859.97 225.574 1863.08 Q222.102 1866.15 215.782 1866.15 Q213.607 1866.15 211.338 1865.78 Q209.093 1865.41 206.685 1864.67 L206.685 1859.97 Q208.769 1861.11 210.991 1861.66 Q213.213 1862.22 215.69 1862.22 Q219.694 1862.22 222.032 1860.11 Q224.37 1858.01 224.37 1854.4 Q224.37 1850.78 222.032 1848.68 Q219.694 1846.57 215.69 1846.57 Q213.815 1846.57 211.94 1846.99 Q210.088 1847.4 208.144 1848.28 L208.144 1830.92 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M647.316 1834 Q643.705 1834 641.876 1837.57 Q640.071 1841.11 640.071 1848.24 Q640.071 1855.34 641.876 1858.91 Q643.705 1862.45 647.316 1862.45 Q650.95 1862.45 652.756 1858.91 Q654.584 1855.34 654.584 1848.24 Q654.584 1841.11 652.756 1837.57 Q650.95 1834 647.316 1834 M647.316 1830.3 Q653.126 1830.3 656.182 1834.9 Q659.26 1839.49 659.26 1848.24 Q659.26 1856.96 656.182 1861.57 Q653.126 1866.15 647.316 1866.15 Q641.506 1866.15 638.427 1861.57 Q635.372 1856.96 635.372 1848.24 Q635.372 1839.49 638.427 1834.9 Q641.506 1830.3 647.316 1830.3 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M667.478 1859.6 L672.362 1859.6 L672.362 1865.48 L667.478 1865.48 L667.478 1859.6 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M683.357 1861.55 L690.996 1861.55 L690.996 1835.18 L682.686 1836.85 L682.686 1832.59 L690.95 1830.92 L695.626 1830.92 L695.626 1861.55 L703.265 1861.55 L703.265 1865.48 L683.357 1865.48 L683.357 1861.55 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M722.709 1834 Q719.098 1834 717.269 1837.57 Q715.464 1841.11 715.464 1848.24 Q715.464 1855.34 717.269 1858.91 Q719.098 1862.45 722.709 1862.45 Q726.343 1862.45 728.149 1858.91 Q729.978 1855.34 729.978 1848.24 Q729.978 1841.11 728.149 1837.57 Q726.343 1834 722.709 1834 M722.709 1830.3 Q728.519 1830.3 731.575 1834.9 Q734.653 1839.49 734.653 1848.24 Q734.653 1856.96 731.575 1861.57 Q728.519 1866.15 722.709 1866.15 Q716.899 1866.15 713.82 1861.57 Q710.765 1856.96 710.765 1848.24 Q710.765 1839.49 713.82 1834.9 Q716.899 1830.3 722.709 1830.3 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M1152.92 1834 Q1149.31 1834 1147.48 1837.57 Q1145.68 1841.11 1145.68 1848.24 Q1145.68 1855.34 1147.48 1858.91 Q1149.31 1862.45 1152.92 1862.45 Q1156.56 1862.45 1158.36 1858.91 Q1160.19 1855.34 1160.19 1848.24 Q1160.19 1841.11 1158.36 1837.57 Q1156.56 1834 1152.92 1834 M1152.92 1830.3 Q1158.73 1830.3 1161.79 1834.9 Q1164.87 1839.49 1164.87 1848.24 Q1164.87 1856.96 1161.79 1861.57 Q1158.73 1866.15 1152.92 1866.15 Q1147.11 1866.15 1144.03 1861.57 Q1140.98 1856.96 1140.98 1848.24 Q1140.98 1839.49 1144.03 1834.9 Q1147.11 1830.3 1152.92 1830.3 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M1173.08 1859.6 L1177.97 1859.6 L1177.97 1865.48 L1173.08 1865.48 L1173.08 1859.6 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M1188.96 1861.55 L1196.6 1861.55 L1196.6 1835.18 L1188.29 1836.85 L1188.29 1832.59 L1196.56 1830.92 L1201.23 1830.92 L1201.23 1861.55 L1208.87 1861.55 L1208.87 1865.48 L1188.96 1865.48 L1188.96 1861.55 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M1218.36 1830.92 L1236.72 1830.92 L1236.72 1834.86 L1222.64 1834.86 L1222.64 1843.33 Q1223.66 1842.98 1224.68 1842.82 Q1225.7 1842.64 1226.72 1842.64 Q1232.51 1842.64 1235.89 1845.81 Q1239.27 1848.98 1239.27 1854.4 Q1239.27 1859.97 1235.79 1863.08 Q1232.32 1866.15 1226 1866.15 Q1223.83 1866.15 1221.56 1865.78 Q1219.31 1865.41 1216.9 1864.67 L1216.9 1859.97 Q1218.99 1861.11 1221.21 1861.66 Q1223.43 1862.22 1225.91 1862.22 Q1229.91 1862.22 1232.25 1860.11 Q1234.59 1858.01 1234.59 1854.4 Q1234.59 1850.78 1232.25 1848.68 Q1229.91 1846.57 1225.91 1846.57 Q1224.03 1846.57 1222.16 1846.99 Q1220.31 1847.4 1218.36 1848.28 L1218.36 1830.92 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M1657.53 1834 Q1653.92 1834 1652.1 1837.57 Q1650.29 1841.11 1650.29 1848.24 Q1650.29 1855.34 1652.1 1858.91 Q1653.92 1862.45 1657.53 1862.45 Q1661.17 1862.45 1662.97 1858.91 Q1664.8 1855.34 1664.8 1848.24 Q1664.8 1841.11 1662.97 1837.57 Q1661.17 1834 1657.53 1834 M1657.53 1830.3 Q1663.34 1830.3 1666.4 1834.9 Q1669.48 1839.49 1669.48 1848.24 Q1669.48 1856.96 1666.4 1861.57 Q1663.34 1866.15 1657.53 1866.15 Q1651.72 1866.15 1648.65 1861.57 Q1645.59 1856.96 1645.59 1848.24 Q1645.59 1839.49 1648.65 1834.9 Q1651.72 1830.3 1657.53 1830.3 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M1677.7 1859.6 L1682.58 1859.6 L1682.58 1865.48 L1677.7 1865.48 L1677.7 1859.6 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M1696.79 1861.55 L1713.11 1861.55 L1713.11 1865.48 L1691.17 1865.48 L1691.17 1861.55 Q1693.83 1858.79 1698.41 1854.16 Q1703.02 1849.51 1704.2 1848.17 Q1706.45 1845.65 1707.33 1843.91 Q1708.23 1842.15 1708.23 1840.46 Q1708.23 1837.71 1706.28 1835.97 Q1704.36 1834.23 1701.26 1834.23 Q1699.06 1834.23 1696.61 1835 Q1694.18 1835.76 1691.4 1837.31 L1691.4 1832.59 Q1694.22 1831.46 1696.68 1830.88 Q1699.13 1830.3 1701.17 1830.3 Q1706.54 1830.3 1709.73 1832.98 Q1712.93 1835.67 1712.93 1840.16 Q1712.93 1842.29 1712.12 1844.21 Q1711.33 1846.11 1709.22 1848.7 Q1708.65 1849.37 1705.54 1852.59 Q1702.44 1855.78 1696.79 1861.55 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M1732.93 1834 Q1729.32 1834 1727.49 1837.57 Q1725.68 1841.11 1725.68 1848.24 Q1725.68 1855.34 1727.49 1858.91 Q1729.32 1862.45 1732.93 1862.45 Q1736.56 1862.45 1738.37 1858.91 Q1740.2 1855.34 1740.2 1848.24 Q1740.2 1841.11 1738.37 1837.57 Q1736.56 1834 1732.93 1834 M1732.93 1830.3 Q1738.74 1830.3 1741.79 1834.9 Q1744.87 1839.49 1744.87 1848.24 Q1744.87 1856.96 1741.79 1861.57 Q1738.74 1866.15 1732.93 1866.15 Q1727.12 1866.15 1724.04 1861.57 Q1720.98 1856.96 1720.98 1848.24 Q1720.98 1839.49 1724.04 1834.9 Q1727.12 1830.3 1732.93 1830.3 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M2163.14 1834 Q2159.53 1834 2157.7 1837.57 Q2155.9 1841.11 2155.9 1848.24 Q2155.9 1855.34 2157.7 1858.91 Q2159.53 1862.45 2163.14 1862.45 Q2166.78 1862.45 2168.58 1858.91 Q2170.41 1855.34 2170.41 1848.24 Q2170.41 1841.11 2168.58 1837.57 Q2166.78 1834 2163.14 1834 M2163.14 1830.3 Q2168.95 1830.3 2172.01 1834.9 Q2175.09 1839.49 2175.09 1848.24 Q2175.09 1856.96 2172.01 1861.57 Q2168.95 1866.15 2163.14 1866.15 Q2157.33 1866.15 2154.25 1861.57 Q2151.2 1856.96 2151.2 1848.24 Q2151.2 1839.49 2154.25 1834.9 Q2157.33 1830.3 2163.14 1830.3 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M2183.3 1859.6 L2188.19 1859.6 L2188.19 1865.48 L2183.3 1865.48 L2183.3 1859.6 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M2202.4 1861.55 L2218.72 1861.55 L2218.72 1865.48 L2196.78 1865.48 L2196.78 1861.55 Q2199.44 1858.79 2204.02 1854.16 Q2208.63 1849.51 2209.81 1848.17 Q2212.05 1845.65 2212.93 1843.91 Q2213.84 1842.15 2213.84 1840.46 Q2213.84 1837.71 2211.89 1835.97 Q2209.97 1834.23 2206.87 1834.23 Q2204.67 1834.23 2202.22 1835 Q2199.79 1835.76 2197.01 1837.31 L2197.01 1832.59 Q2199.83 1831.46 2202.29 1830.88 Q2204.74 1830.3 2206.78 1830.3 Q2212.15 1830.3 2215.34 1832.98 Q2218.54 1835.67 2218.54 1840.16 Q2218.54 1842.29 2217.73 1844.21 Q2216.94 1846.11 2214.83 1848.7 Q2214.25 1849.37 2211.15 1852.59 Q2208.05 1855.78 2202.4 1861.55 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M2228.58 1830.92 L2246.94 1830.92 L2246.94 1834.86 L2232.86 1834.86 L2232.86 1843.33 Q2233.88 1842.98 2234.9 1842.82 Q2235.92 1842.64 2236.94 1842.64 Q2242.72 1842.64 2246.1 1845.81 Q2249.48 1848.98 2249.48 1854.4 Q2249.48 1859.97 2246.01 1863.08 Q2242.54 1866.15 2236.22 1866.15 Q2234.04 1866.15 2231.78 1865.78 Q2229.53 1865.41 2227.12 1864.67 L2227.12 1859.97 Q2229.21 1861.11 2231.43 1861.66 Q2233.65 1862.22 2236.13 1862.22 Q2240.13 1862.22 2242.47 1860.11 Q2244.81 1858.01 2244.81 1854.4 Q2244.81 1850.78 2242.47 1848.68 Q2240.13 1846.57 2236.13 1846.57 Q2234.25 1846.57 2232.38 1846.99 Q2230.53 1847.4 2228.58 1848.28 L2228.58 1830.92 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><polyline clip-path=\"url(#clip002)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none\" points=\"143.576,1751.15 2640.76,1751.15 \"/>\n<polyline clip-path=\"url(#clip002)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none\" points=\"143.576,1357.28 2640.76,1357.28 \"/>\n<polyline clip-path=\"url(#clip002)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none\" points=\"143.576,963.399 2640.76,963.399 \"/>\n<polyline clip-path=\"url(#clip002)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none\" points=\"143.576,569.523 2640.76,569.523 \"/>\n<polyline clip-path=\"url(#clip002)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none\" points=\"143.576,175.648 2640.76,175.648 \"/>\n<polyline clip-path=\"url(#clip000)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"143.576,1800.78 143.576,47.2441 \"/>\n<polyline clip-path=\"url(#clip000)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"143.576,1751.15 162.473,1751.15 \"/>\n<polyline clip-path=\"url(#clip000)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"143.576,1357.28 162.473,1357.28 \"/>\n<polyline clip-path=\"url(#clip000)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"143.576,963.399 162.473,963.399 \"/>\n<polyline clip-path=\"url(#clip000)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"143.576,569.523 162.473,569.523 \"/>\n<polyline clip-path=\"url(#clip000)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"143.576,175.648 162.473,175.648 \"/>\n<path clip-path=\"url(#clip000)\" d=\"M91.3112 1736.95 Q87.7001 1736.95 85.8714 1740.51 Q84.0658 1744.06 84.0658 1751.19 Q84.0658 1758.29 85.8714 1761.86 Q87.7001 1765.4 91.3112 1765.4 Q94.9454 1765.4 96.7509 1761.86 Q98.5796 1758.29 98.5796 1751.19 Q98.5796 1744.06 96.7509 1740.51 Q94.9454 1736.95 91.3112 1736.95 M91.3112 1733.25 Q97.1213 1733.25 100.177 1737.85 Q103.256 1742.44 103.256 1751.19 Q103.256 1759.91 100.177 1764.52 Q97.1213 1769.1 91.3112 1769.1 Q85.501 1769.1 82.4223 1764.52 Q79.3668 1759.91 79.3668 1751.19 Q79.3668 1742.44 82.4223 1737.85 Q85.501 1733.25 91.3112 1733.25 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M82.3529 1340 L100.709 1340 L100.709 1343.93 L86.6353 1343.93 L86.6353 1352.4 Q87.6538 1352.06 88.6723 1351.89 Q89.6908 1351.71 90.7093 1351.71 Q96.4963 1351.71 99.8759 1354.88 Q103.256 1358.05 103.256 1363.47 Q103.256 1369.05 99.7833 1372.15 Q96.3111 1375.23 89.9917 1375.23 Q87.8158 1375.23 85.5473 1374.86 Q83.3019 1374.49 80.8946 1373.74 L80.8946 1369.05 Q82.9779 1370.18 85.2001 1370.74 Q87.4223 1371.29 89.8991 1371.29 Q93.9037 1371.29 96.2417 1369.18 Q98.5796 1367.08 98.5796 1363.47 Q98.5796 1359.86 96.2417 1357.75 Q93.9037 1355.64 89.8991 1355.64 Q88.0241 1355.64 86.1492 1356.06 Q84.2973 1356.48 82.3529 1357.36 L82.3529 1340 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M51.9595 976.744 L59.5984 976.744 L59.5984 950.379 L51.2882 952.045 L51.2882 947.786 L59.5521 946.119 L64.228 946.119 L64.228 976.744 L71.8668 976.744 L71.8668 980.679 L51.9595 980.679 L51.9595 976.744 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M91.3112 949.198 Q87.7001 949.198 85.8714 952.763 Q84.0658 956.304 84.0658 963.434 Q84.0658 970.54 85.8714 974.105 Q87.7001 977.647 91.3112 977.647 Q94.9454 977.647 96.7509 974.105 Q98.5796 970.54 98.5796 963.434 Q98.5796 956.304 96.7509 952.763 Q94.9454 949.198 91.3112 949.198 M91.3112 945.494 Q97.1213 945.494 100.177 950.101 Q103.256 954.684 103.256 963.434 Q103.256 972.161 100.177 976.767 Q97.1213 981.351 91.3112 981.351 Q85.501 981.351 82.4223 976.767 Q79.3668 972.161 79.3668 963.434 Q79.3668 954.684 82.4223 950.101 Q85.501 945.494 91.3112 945.494 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M52.9549 582.868 L60.5937 582.868 L60.5937 556.503 L52.2836 558.169 L52.2836 553.91 L60.5474 552.243 L65.2233 552.243 L65.2233 582.868 L72.8622 582.868 L72.8622 586.803 L52.9549 586.803 L52.9549 582.868 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M82.3529 552.243 L100.709 552.243 L100.709 556.179 L86.6353 556.179 L86.6353 564.651 Q87.6538 564.304 88.6723 564.142 Q89.6908 563.956 90.7093 563.956 Q96.4963 563.956 99.8759 567.128 Q103.256 570.299 103.256 575.716 Q103.256 581.294 99.7833 584.396 Q96.3111 587.475 89.9917 587.475 Q87.8158 587.475 85.5473 587.104 Q83.3019 586.734 80.8946 585.993 L80.8946 581.294 Q82.9779 582.428 85.2001 582.984 Q87.4223 583.54 89.8991 583.54 Q93.9037 583.54 96.2417 581.433 Q98.5796 579.327 98.5796 575.716 Q98.5796 572.104 96.2417 569.998 Q93.9037 567.892 89.8991 567.892 Q88.0241 567.892 86.1492 568.308 Q84.2973 568.725 82.3529 569.604 L82.3529 552.243 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M55.1771 188.992 L71.4965 188.992 L71.4965 192.928 L49.5521 192.928 L49.5521 188.992 Q52.2141 186.238 56.7975 181.608 Q61.4039 176.955 62.5845 175.613 Q64.8298 173.09 65.7094 171.354 Q66.6122 169.594 66.6122 167.905 Q66.6122 165.15 64.6678 163.414 Q62.7465 161.678 59.6447 161.678 Q57.4456 161.678 54.9919 162.442 Q52.5614 163.206 49.7836 164.756 L49.7836 160.034 Q52.6077 158.9 55.0614 158.321 Q57.515 157.743 59.5521 157.743 Q64.9224 157.743 68.1168 160.428 Q71.3113 163.113 71.3113 167.604 Q71.3113 169.733 70.5011 171.655 Q69.7141 173.553 67.6076 176.145 Q67.0289 176.817 63.927 180.034 Q60.8252 183.229 55.1771 188.992 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M91.3112 161.446 Q87.7001 161.446 85.8714 165.011 Q84.0658 168.553 84.0658 175.682 Q84.0658 182.789 85.8714 186.354 Q87.7001 189.895 91.3112 189.895 Q94.9454 189.895 96.7509 186.354 Q98.5796 182.789 98.5796 175.682 Q98.5796 168.553 96.7509 165.011 Q94.9454 161.446 91.3112 161.446 M91.3112 157.743 Q97.1213 157.743 100.177 162.349 Q103.256 166.932 103.256 175.682 Q103.256 184.409 100.177 189.016 Q97.1213 193.599 91.3112 193.599 Q85.501 193.599 82.4223 189.016 Q79.3668 184.409 79.3668 175.682 Q79.3668 166.932 82.4223 162.349 Q85.501 157.743 91.3112 157.743 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip002)\" d=\"M280.925 1514.83 L280.925 1751.15 L482.969 1751.15 L482.969 1514.83 L280.925 1514.83 L280.925 1514.83  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip002)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"280.925,1514.83 280.925,1751.15 482.969,1751.15 482.969,1514.83 280.925,1514.83 \"/>\n<path clip-path=\"url(#clip002)\" d=\"M482.969 1199.72 L482.969 1751.15 L685.012 1751.15 L685.012 1199.72 L482.969 1199.72 L482.969 1199.72  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip002)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"482.969,1199.72 482.969,1751.15 685.012,1751.15 685.012,1199.72 482.969,1199.72 \"/>\n<path clip-path=\"url(#clip002)\" d=\"M685.012 175.648 L685.012 1751.15 L887.056 1751.15 L887.056 175.648 L685.012 175.648 L685.012 175.648  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip002)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"685.012,175.648 685.012,1751.15 887.056,1751.15 887.056,175.648 685.012,175.648 \"/>\n<path clip-path=\"url(#clip002)\" d=\"M887.056 96.8724 L887.056 1751.15 L1089.1 1751.15 L1089.1 96.8724 L887.056 96.8724 L887.056 96.8724  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip002)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"887.056,96.8724 887.056,1751.15 1089.1,1751.15 1089.1,96.8724 887.056,96.8724 \"/>\n<path clip-path=\"url(#clip002)\" d=\"M1089.1 254.423 L1089.1 1751.15 L1291.14 1751.15 L1291.14 254.423 L1089.1 254.423 L1089.1 254.423  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip002)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"1089.1,254.423 1089.1,1751.15 1291.14,1751.15 1291.14,254.423 1089.1,254.423 \"/>\n<path clip-path=\"url(#clip002)\" d=\"M1291.14 963.399 L1291.14 1751.15 L1493.19 1751.15 L1493.19 963.399 L1291.14 963.399 L1291.14 963.399  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip002)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"1291.14,963.399 1291.14,1751.15 1493.19,1751.15 1493.19,963.399 1291.14,963.399 \"/>\n<path clip-path=\"url(#clip002)\" d=\"M1493.19 1042.17 L1493.19 1751.15 L1695.23 1751.15 L1695.23 1042.17 L1493.19 1042.17 L1493.19 1042.17  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip002)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"1493.19,1042.17 1493.19,1751.15 1695.23,1751.15 1695.23,1042.17 1493.19,1042.17 \"/>\n<path clip-path=\"url(#clip002)\" d=\"M1695.23 1199.72 L1695.23 1751.15 L1897.28 1751.15 L1897.28 1199.72 L1695.23 1199.72 L1695.23 1199.72  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip002)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"1695.23,1199.72 1695.23,1751.15 1897.28,1751.15 1897.28,1199.72 1695.23,1199.72 \"/>\n<path clip-path=\"url(#clip002)\" d=\"M1897.28 1593.6 L1897.28 1751.15 L2099.32 1751.15 L2099.32 1593.6 L1897.28 1593.6 L1897.28 1593.6  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip002)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"1897.28,1593.6 1897.28,1751.15 2099.32,1751.15 2099.32,1593.6 1897.28,1593.6 \"/>\n<path clip-path=\"url(#clip002)\" d=\"M2099.32 1672.38 L2099.32 1751.15 L2301.36 1751.15 L2301.36 1672.38 L2099.32 1672.38 L2099.32 1672.38  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip002)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"2099.32,1672.38 2099.32,1751.15 2301.36,1751.15 2301.36,1672.38 2099.32,1672.38 \"/>\n<path clip-path=\"url(#clip002)\" d=\"M2301.36 1672.38 L2301.36 1751.15 L2503.41 1751.15 L2503.41 1672.38 L2301.36 1672.38 L2301.36 1672.38  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip002)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"2301.36,1672.38 2301.36,1751.15 2503.41,1751.15 2503.41,1672.38 2301.36,1672.38 \"/>\n<circle clip-path=\"url(#clip002)\" style=\"fill:#009af9; stroke:none; fill-opacity:0\" cx=\"381.947\" cy=\"1514.83\" r=\"2\"/>\n<circle clip-path=\"url(#clip002)\" style=\"fill:#009af9; stroke:none; fill-opacity:0\" cx=\"583.991\" cy=\"1199.72\" r=\"2\"/>\n<circle clip-path=\"url(#clip002)\" style=\"fill:#009af9; stroke:none; fill-opacity:0\" cx=\"786.034\" cy=\"175.648\" r=\"2\"/>\n<circle clip-path=\"url(#clip002)\" style=\"fill:#009af9; stroke:none; fill-opacity:0\" cx=\"988.078\" cy=\"96.8724\" r=\"2\"/>\n<circle clip-path=\"url(#clip002)\" style=\"fill:#009af9; stroke:none; fill-opacity:0\" cx=\"1190.12\" cy=\"254.423\" r=\"2\"/>\n<circle clip-path=\"url(#clip002)\" style=\"fill:#009af9; stroke:none; fill-opacity:0\" cx=\"1392.17\" cy=\"963.399\" r=\"2\"/>\n<circle clip-path=\"url(#clip002)\" style=\"fill:#009af9; stroke:none; fill-opacity:0\" cx=\"1594.21\" cy=\"1042.17\" r=\"2\"/>\n<circle clip-path=\"url(#clip002)\" style=\"fill:#009af9; stroke:none; fill-opacity:0\" cx=\"1796.25\" cy=\"1199.72\" r=\"2\"/>\n<circle clip-path=\"url(#clip002)\" style=\"fill:#009af9; stroke:none; fill-opacity:0\" cx=\"1998.3\" cy=\"1593.6\" r=\"2\"/>\n<circle clip-path=\"url(#clip002)\" style=\"fill:#009af9; stroke:none; fill-opacity:0\" cx=\"2200.34\" cy=\"1672.38\" r=\"2\"/>\n<circle clip-path=\"url(#clip002)\" style=\"fill:#009af9; stroke:none; fill-opacity:0\" cx=\"2402.38\" cy=\"1672.38\" r=\"2\"/>\n<path clip-path=\"url(#clip000)\" d=\"M2255.37 209.375 L2557.52 209.375 L2557.52 105.695 L2255.37 105.695  Z\" fill=\"#ffffff\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip000)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"2255.37,209.375 2557.52,209.375 2557.52,105.695 2255.37,105.695 2255.37,209.375 \"/>\n<path clip-path=\"url(#clip000)\" d=\"M2283.11 178.271 L2449.59 178.271 L2449.59 136.799 L2283.11 136.799 L2283.11 178.271  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip000)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"2283.11,178.271 2449.59,178.271 2449.59,136.799 2283.11,136.799 2283.11,178.271 \"/>\n<path clip-path=\"url(#clip000)\" d=\"M2491.18 177.223 Q2489.38 181.852 2487.66 183.264 Q2485.95 184.676 2483.08 184.676 L2479.68 184.676 L2479.68 181.112 L2482.18 181.112 Q2483.94 181.112 2484.91 180.278 Q2485.88 179.445 2487.06 176.343 L2487.83 174.399 L2477.34 148.889 L2481.85 148.889 L2489.96 169.167 L2498.06 148.889 L2502.57 148.889 L2491.18 177.223 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip000)\" d=\"M2509.86 170.88 L2517.5 170.88 L2517.5 144.515 L2509.19 146.181 L2509.19 141.922 L2517.46 140.255 L2522.13 140.255 L2522.13 170.88 L2529.77 170.88 L2529.77 174.815 L2509.86 174.815 L2509.86 170.88 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /></svg>\n```\n:::\n:::\n\n\nAnd for the budbreak parameter:\n\n::: {.cell execution_count=8}\n``` {.julia .cell-code}\nbudbreaks = rand(Beta(2.0, 10), 10, 10)\nhistogram(vec(budbreaks))\n```\n\n::: {.cell-output .cell-output-display execution_count=8}\n```{=html}\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"672\" height=\"480\" viewBox=\"0 0 2688 1920\">\n<defs>\n  <clipPath id=\"clip090\">\n    <rect x=\"0\" y=\"0\" width=\"2688\" height=\"1920\"/>\n  </clipPath>\n</defs>\n<path clip-path=\"url(#clip090)\" d=\"M0 1920 L2688 1920 L2688 0 L0 0  Z\" fill=\"#ffffff\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<defs>\n  <clipPath id=\"clip091\">\n    <rect x=\"537\" y=\"0\" width=\"1883\" height=\"1883\"/>\n  </clipPath>\n</defs>\n<path clip-path=\"url(#clip090)\" d=\"M143.576 1800.78 L2640.76 1800.78 L2640.76 47.2441 L143.576 47.2441  Z\" fill=\"#ffffff\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<defs>\n  <clipPath id=\"clip092\">\n    <rect x=\"143\" y=\"47\" width=\"2498\" height=\"1755\"/>\n  </clipPath>\n</defs>\n<polyline clip-path=\"url(#clip092)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none\" points=\"280.925,1800.78 280.925,47.2441 \"/>\n<polyline clip-path=\"url(#clip092)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none\" points=\"725.421,1800.78 725.421,47.2441 \"/>\n<polyline clip-path=\"url(#clip092)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none\" points=\"1169.92,1800.78 1169.92,47.2441 \"/>\n<polyline clip-path=\"url(#clip092)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none\" points=\"1614.41,1800.78 1614.41,47.2441 \"/>\n<polyline clip-path=\"url(#clip092)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none\" points=\"2058.91,1800.78 2058.91,47.2441 \"/>\n<polyline clip-path=\"url(#clip092)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none\" points=\"2503.41,1800.78 2503.41,47.2441 \"/>\n<polyline clip-path=\"url(#clip090)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"143.576,1800.78 2640.76,1800.78 \"/>\n<polyline clip-path=\"url(#clip090)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"280.925,1800.78 280.925,1781.88 \"/>\n<polyline clip-path=\"url(#clip090)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"725.421,1800.78 725.421,1781.88 \"/>\n<polyline clip-path=\"url(#clip090)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"1169.92,1800.78 1169.92,1781.88 \"/>\n<polyline clip-path=\"url(#clip090)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"1614.41,1800.78 1614.41,1781.88 \"/>\n<polyline clip-path=\"url(#clip090)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"2058.91,1800.78 2058.91,1781.88 \"/>\n<polyline clip-path=\"url(#clip090)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"2503.41,1800.78 2503.41,1781.88 \"/>\n<path clip-path=\"url(#clip090)\" d=\"M258.309 1834 Q254.698 1834 252.87 1837.57 Q251.064 1841.11 251.064 1848.24 Q251.064 1855.34 252.87 1858.91 Q254.698 1862.45 258.309 1862.45 Q261.944 1862.45 263.749 1858.91 Q265.578 1855.34 265.578 1848.24 Q265.578 1841.11 263.749 1837.57 Q261.944 1834 258.309 1834 M258.309 1830.3 Q264.119 1830.3 267.175 1834.9 Q270.254 1839.49 270.254 1848.24 Q270.254 1856.96 267.175 1861.57 Q264.119 1866.15 258.309 1866.15 Q252.499 1866.15 249.42 1861.57 Q246.365 1856.96 246.365 1848.24 Q246.365 1839.49 249.42 1834.9 Q252.499 1830.3 258.309 1830.3 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M278.471 1859.6 L283.355 1859.6 L283.355 1865.48 L278.471 1865.48 L278.471 1859.6 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M303.541 1834 Q299.929 1834 298.101 1837.57 Q296.295 1841.11 296.295 1848.24 Q296.295 1855.34 298.101 1858.91 Q299.929 1862.45 303.541 1862.45 Q307.175 1862.45 308.98 1858.91 Q310.809 1855.34 310.809 1848.24 Q310.809 1841.11 308.98 1837.57 Q307.175 1834 303.541 1834 M303.541 1830.3 Q309.351 1830.3 312.406 1834.9 Q315.485 1839.49 315.485 1848.24 Q315.485 1856.96 312.406 1861.57 Q309.351 1866.15 303.541 1866.15 Q297.73 1866.15 294.652 1861.57 Q291.596 1856.96 291.596 1848.24 Q291.596 1839.49 294.652 1834.9 Q297.73 1830.3 303.541 1830.3 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M703.419 1834 Q699.808 1834 697.979 1837.57 Q696.174 1841.11 696.174 1848.24 Q696.174 1855.34 697.979 1858.91 Q699.808 1862.45 703.419 1862.45 Q707.053 1862.45 708.859 1858.91 Q710.688 1855.34 710.688 1848.24 Q710.688 1841.11 708.859 1837.57 Q707.053 1834 703.419 1834 M703.419 1830.3 Q709.229 1830.3 712.285 1834.9 Q715.363 1839.49 715.363 1848.24 Q715.363 1856.96 712.285 1861.57 Q709.229 1866.15 703.419 1866.15 Q697.609 1866.15 694.53 1861.57 Q691.475 1856.96 691.475 1848.24 Q691.475 1839.49 694.53 1834.9 Q697.609 1830.3 703.419 1830.3 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M723.581 1859.6 L728.465 1859.6 L728.465 1865.48 L723.581 1865.48 L723.581 1859.6 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M739.461 1861.55 L747.099 1861.55 L747.099 1835.18 L738.789 1836.85 L738.789 1832.59 L747.053 1830.92 L751.729 1830.92 L751.729 1861.55 L759.368 1861.55 L759.368 1865.48 L739.461 1865.48 L739.461 1861.55 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M1148.1 1834 Q1144.49 1834 1142.66 1837.57 Q1140.86 1841.11 1140.86 1848.24 Q1140.86 1855.34 1142.66 1858.91 Q1144.49 1862.45 1148.1 1862.45 Q1151.73 1862.45 1153.54 1858.91 Q1155.37 1855.34 1155.37 1848.24 Q1155.37 1841.11 1153.54 1837.57 Q1151.73 1834 1148.1 1834 M1148.1 1830.3 Q1153.91 1830.3 1156.97 1834.9 Q1160.04 1839.49 1160.04 1848.24 Q1160.04 1856.96 1156.97 1861.57 Q1153.91 1866.15 1148.1 1866.15 Q1142.29 1866.15 1139.21 1861.57 Q1136.16 1856.96 1136.16 1848.24 Q1136.16 1839.49 1139.21 1834.9 Q1142.29 1830.3 1148.1 1830.3 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M1168.26 1859.6 L1173.15 1859.6 L1173.15 1865.48 L1168.26 1865.48 L1168.26 1859.6 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M1187.36 1861.55 L1203.68 1861.55 L1203.68 1865.48 L1181.73 1865.48 L1181.73 1861.55 Q1184.4 1858.79 1188.98 1854.16 Q1193.59 1849.51 1194.77 1848.17 Q1197.01 1845.65 1197.89 1843.91 Q1198.79 1842.15 1198.79 1840.46 Q1198.79 1837.71 1196.85 1835.97 Q1194.93 1834.23 1191.83 1834.23 Q1189.63 1834.23 1187.17 1835 Q1184.74 1835.76 1181.97 1837.31 L1181.97 1832.59 Q1184.79 1831.46 1187.24 1830.88 Q1189.7 1830.3 1191.73 1830.3 Q1197.1 1830.3 1200.3 1832.98 Q1203.49 1835.67 1203.49 1840.16 Q1203.49 1842.29 1202.68 1844.21 Q1201.9 1846.11 1199.79 1848.7 Q1199.21 1849.37 1196.11 1852.59 Q1193.01 1855.78 1187.36 1861.55 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M1592.12 1834 Q1588.51 1834 1586.68 1837.57 Q1584.88 1841.11 1584.88 1848.24 Q1584.88 1855.34 1586.68 1858.91 Q1588.51 1862.45 1592.12 1862.45 Q1595.76 1862.45 1597.56 1858.91 Q1599.39 1855.34 1599.39 1848.24 Q1599.39 1841.11 1597.56 1837.57 Q1595.76 1834 1592.12 1834 M1592.12 1830.3 Q1597.93 1830.3 1600.99 1834.9 Q1604.07 1839.49 1604.07 1848.24 Q1604.07 1856.96 1600.99 1861.57 Q1597.93 1866.15 1592.12 1866.15 Q1586.31 1866.15 1583.23 1861.57 Q1580.18 1856.96 1580.18 1848.24 Q1580.18 1839.49 1583.23 1834.9 Q1586.31 1830.3 1592.12 1830.3 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M1612.28 1859.6 L1617.17 1859.6 L1617.17 1865.48 L1612.28 1865.48 L1612.28 1859.6 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M1641.52 1846.85 Q1644.88 1847.57 1646.75 1849.84 Q1648.65 1852.1 1648.65 1855.44 Q1648.65 1860.55 1645.13 1863.35 Q1641.61 1866.15 1635.13 1866.15 Q1632.96 1866.15 1630.64 1865.71 Q1628.35 1865.3 1625.9 1864.44 L1625.9 1859.93 Q1627.84 1861.06 1630.15 1861.64 Q1632.47 1862.22 1634.99 1862.22 Q1639.39 1862.22 1641.68 1860.48 Q1644 1858.75 1644 1855.44 Q1644 1852.38 1641.84 1850.67 Q1639.71 1848.93 1635.9 1848.93 L1631.87 1848.93 L1631.87 1845.09 L1636.08 1845.09 Q1639.53 1845.09 1641.36 1843.72 Q1643.19 1842.34 1643.19 1839.74 Q1643.19 1837.08 1641.29 1835.67 Q1639.41 1834.23 1635.9 1834.23 Q1633.97 1834.23 1631.77 1834.65 Q1629.58 1835.07 1626.94 1835.95 L1626.94 1831.78 Q1629.6 1831.04 1631.91 1830.67 Q1634.25 1830.3 1636.31 1830.3 Q1641.64 1830.3 1644.74 1832.73 Q1647.84 1835.14 1647.84 1839.26 Q1647.84 1842.13 1646.2 1844.12 Q1644.55 1846.09 1641.52 1846.85 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M2036.05 1834 Q2032.44 1834 2030.61 1837.57 Q2028.81 1841.11 2028.81 1848.24 Q2028.81 1855.34 2030.61 1858.91 Q2032.44 1862.45 2036.05 1862.45 Q2039.69 1862.45 2041.49 1858.91 Q2043.32 1855.34 2043.32 1848.24 Q2043.32 1841.11 2041.49 1837.57 Q2039.69 1834 2036.05 1834 M2036.05 1830.3 Q2041.86 1830.3 2044.92 1834.9 Q2048 1839.49 2048 1848.24 Q2048 1856.96 2044.92 1861.57 Q2041.86 1866.15 2036.05 1866.15 Q2030.24 1866.15 2027.16 1861.57 Q2024.11 1856.96 2024.11 1848.24 Q2024.11 1839.49 2027.16 1834.9 Q2030.24 1830.3 2036.05 1830.3 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M2056.21 1859.6 L2061.1 1859.6 L2061.1 1865.48 L2056.21 1865.48 L2056.21 1859.6 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M2084.13 1835 L2072.32 1853.45 L2084.13 1853.45 L2084.13 1835 M2082.9 1830.92 L2088.78 1830.92 L2088.78 1853.45 L2093.71 1853.45 L2093.71 1857.34 L2088.78 1857.34 L2088.78 1865.48 L2084.13 1865.48 L2084.13 1857.34 L2068.53 1857.34 L2068.53 1852.82 L2082.9 1830.92 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M2481.29 1834 Q2477.68 1834 2475.85 1837.57 Q2474.04 1841.11 2474.04 1848.24 Q2474.04 1855.34 2475.85 1858.91 Q2477.68 1862.45 2481.29 1862.45 Q2484.92 1862.45 2486.73 1858.91 Q2488.56 1855.34 2488.56 1848.24 Q2488.56 1841.11 2486.73 1837.57 Q2484.92 1834 2481.29 1834 M2481.29 1830.3 Q2487.1 1830.3 2490.15 1834.9 Q2493.23 1839.49 2493.23 1848.24 Q2493.23 1856.96 2490.15 1861.57 Q2487.1 1866.15 2481.29 1866.15 Q2475.48 1866.15 2472.4 1861.57 Q2469.34 1856.96 2469.34 1848.24 Q2469.34 1839.49 2472.4 1834.9 Q2475.48 1830.3 2481.29 1830.3 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M2501.45 1859.6 L2506.33 1859.6 L2506.33 1865.48 L2501.45 1865.48 L2501.45 1859.6 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M2516.57 1830.92 L2534.92 1830.92 L2534.92 1834.86 L2520.85 1834.86 L2520.85 1843.33 Q2521.87 1842.98 2522.89 1842.82 Q2523.9 1842.64 2524.92 1842.64 Q2530.71 1842.64 2534.09 1845.81 Q2537.47 1848.98 2537.47 1854.4 Q2537.47 1859.97 2534 1863.08 Q2530.52 1866.15 2524.21 1866.15 Q2522.03 1866.15 2519.76 1865.78 Q2517.52 1865.41 2515.11 1864.67 L2515.11 1859.97 Q2517.19 1861.11 2519.41 1861.66 Q2521.64 1862.22 2524.11 1862.22 Q2528.12 1862.22 2530.46 1860.11 Q2532.79 1858.01 2532.79 1854.4 Q2532.79 1850.78 2530.46 1848.68 Q2528.12 1846.57 2524.11 1846.57 Q2522.24 1846.57 2520.36 1846.99 Q2518.51 1847.4 2516.57 1848.28 L2516.57 1830.92 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><polyline clip-path=\"url(#clip092)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none\" points=\"143.576,1751.15 2640.76,1751.15 \"/>\n<polyline clip-path=\"url(#clip092)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none\" points=\"143.576,1406.51 2640.76,1406.51 \"/>\n<polyline clip-path=\"url(#clip092)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none\" points=\"143.576,1061.87 2640.76,1061.87 \"/>\n<polyline clip-path=\"url(#clip092)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none\" points=\"143.576,717.227 2640.76,717.227 \"/>\n<polyline clip-path=\"url(#clip092)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none\" points=\"143.576,372.586 2640.76,372.586 \"/>\n<polyline clip-path=\"url(#clip090)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"143.576,1800.78 143.576,47.2441 \"/>\n<polyline clip-path=\"url(#clip090)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"143.576,1751.15 162.473,1751.15 \"/>\n<polyline clip-path=\"url(#clip090)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"143.576,1406.51 162.473,1406.51 \"/>\n<polyline clip-path=\"url(#clip090)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"143.576,1061.87 162.473,1061.87 \"/>\n<polyline clip-path=\"url(#clip090)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"143.576,717.227 162.473,717.227 \"/>\n<polyline clip-path=\"url(#clip090)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"143.576,372.586 162.473,372.586 \"/>\n<path clip-path=\"url(#clip090)\" d=\"M91.3112 1736.95 Q87.7001 1736.95 85.8714 1740.51 Q84.0658 1744.06 84.0658 1751.19 Q84.0658 1758.29 85.8714 1761.86 Q87.7001 1765.4 91.3112 1765.4 Q94.9454 1765.4 96.7509 1761.86 Q98.5796 1758.29 98.5796 1751.19 Q98.5796 1744.06 96.7509 1740.51 Q94.9454 1736.95 91.3112 1736.95 M91.3112 1733.25 Q97.1213 1733.25 100.177 1737.85 Q103.256 1742.44 103.256 1751.19 Q103.256 1759.91 100.177 1764.52 Q97.1213 1769.1 91.3112 1769.1 Q85.501 1769.1 82.4223 1764.52 Q79.3668 1759.91 79.3668 1751.19 Q79.3668 1742.44 82.4223 1737.85 Q85.501 1733.25 91.3112 1733.25 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M82.3529 1389.23 L100.709 1389.23 L100.709 1393.16 L86.6353 1393.16 L86.6353 1401.64 Q87.6538 1401.29 88.6723 1401.13 Q89.6908 1400.94 90.7093 1400.94 Q96.4963 1400.94 99.8759 1404.11 Q103.256 1407.29 103.256 1412.7 Q103.256 1418.28 99.7833 1421.38 Q96.3111 1424.46 89.9917 1424.46 Q87.8158 1424.46 85.5473 1424.09 Q83.3019 1423.72 80.8946 1422.98 L80.8946 1418.28 Q82.9779 1419.41 85.2001 1419.97 Q87.4223 1420.53 89.8991 1420.53 Q93.9037 1420.53 96.2417 1418.42 Q98.5796 1416.31 98.5796 1412.7 Q98.5796 1409.09 96.2417 1406.98 Q93.9037 1404.88 89.8991 1404.88 Q88.0241 1404.88 86.1492 1405.29 Q84.2973 1405.71 82.3529 1406.59 L82.3529 1389.23 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M51.9595 1075.21 L59.5984 1075.21 L59.5984 1048.85 L51.2882 1050.51 L51.2882 1046.25 L59.5521 1044.59 L64.228 1044.59 L64.228 1075.21 L71.8668 1075.21 L71.8668 1079.15 L51.9595 1079.15 L51.9595 1075.21 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M91.3112 1047.67 Q87.7001 1047.67 85.8714 1051.23 Q84.0658 1054.77 84.0658 1061.9 Q84.0658 1069.01 85.8714 1072.57 Q87.7001 1076.12 91.3112 1076.12 Q94.9454 1076.12 96.7509 1072.57 Q98.5796 1069.01 98.5796 1061.9 Q98.5796 1054.77 96.7509 1051.23 Q94.9454 1047.67 91.3112 1047.67 M91.3112 1043.96 Q97.1213 1043.96 100.177 1048.57 Q103.256 1053.15 103.256 1061.9 Q103.256 1070.63 100.177 1075.24 Q97.1213 1079.82 91.3112 1079.82 Q85.501 1079.82 82.4223 1075.24 Q79.3668 1070.63 79.3668 1061.9 Q79.3668 1053.15 82.4223 1048.57 Q85.501 1043.96 91.3112 1043.96 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M52.9549 730.572 L60.5937 730.572 L60.5937 704.206 L52.2836 705.873 L52.2836 701.614 L60.5474 699.947 L65.2233 699.947 L65.2233 730.572 L72.8622 730.572 L72.8622 734.507 L52.9549 734.507 L52.9549 730.572 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M82.3529 699.947 L100.709 699.947 L100.709 703.882 L86.6353 703.882 L86.6353 712.354 Q87.6538 712.007 88.6723 711.845 Q89.6908 711.66 90.7093 711.66 Q96.4963 711.66 99.8759 714.831 Q103.256 718.002 103.256 723.419 Q103.256 728.998 99.7833 732.099 Q96.3111 735.178 89.9917 735.178 Q87.8158 735.178 85.5473 734.808 Q83.3019 734.437 80.8946 733.697 L80.8946 728.998 Q82.9779 730.132 85.2001 730.687 Q87.4223 731.243 89.8991 731.243 Q93.9037 731.243 96.2417 729.137 Q98.5796 727.03 98.5796 723.419 Q98.5796 719.808 96.2417 717.701 Q93.9037 715.595 89.8991 715.595 Q88.0241 715.595 86.1492 716.012 Q84.2973 716.428 82.3529 717.308 L82.3529 699.947 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M55.1771 385.93 L71.4965 385.93 L71.4965 389.866 L49.5521 389.866 L49.5521 385.93 Q52.2141 383.176 56.7975 378.546 Q61.4039 373.893 62.5845 372.551 Q64.8298 370.028 65.7094 368.292 Q66.6122 366.532 66.6122 364.843 Q66.6122 362.088 64.6678 360.352 Q62.7465 358.616 59.6447 358.616 Q57.4456 358.616 54.9919 359.38 Q52.5614 360.143 49.7836 361.694 L49.7836 356.972 Q52.6077 355.838 55.0614 355.259 Q57.515 354.681 59.5521 354.681 Q64.9224 354.681 68.1168 357.366 Q71.3113 360.051 71.3113 364.542 Q71.3113 366.671 70.5011 368.592 Q69.7141 370.491 67.6076 373.083 Q67.0289 373.755 63.927 376.972 Q60.8252 380.167 55.1771 385.93 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M91.3112 358.384 Q87.7001 358.384 85.8714 361.949 Q84.0658 365.491 84.0658 372.62 Q84.0658 379.727 85.8714 383.291 Q87.7001 386.833 91.3112 386.833 Q94.9454 386.833 96.7509 383.291 Q98.5796 379.727 98.5796 372.62 Q98.5796 365.491 96.7509 361.949 Q94.9454 358.384 91.3112 358.384 M91.3112 354.681 Q97.1213 354.681 100.177 359.287 Q103.256 363.87 103.256 372.62 Q103.256 381.347 100.177 385.954 Q97.1213 390.537 91.3112 390.537 Q85.501 390.537 82.4223 385.954 Q79.3668 381.347 79.3668 372.62 Q79.3668 363.87 82.4223 359.287 Q85.501 354.681 91.3112 354.681 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip092)\" d=\"M280.925 1061.87 L280.925 1751.15 L503.173 1751.15 L503.173 1061.87 L280.925 1061.87 L280.925 1061.87  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip092)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"280.925,1061.87 280.925,1751.15 503.173,1751.15 503.173,1061.87 280.925,1061.87 \"/>\n<path clip-path=\"url(#clip092)\" d=\"M503.173 372.586 L503.173 1751.15 L725.421 1751.15 L725.421 372.586 L503.173 372.586 L503.173 372.586  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip092)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"503.173,372.586 503.173,1751.15 725.421,1751.15 725.421,372.586 503.173,372.586 \"/>\n<path clip-path=\"url(#clip092)\" d=\"M725.421 96.8724 L725.421 1751.15 L947.669 1751.15 L947.669 96.8724 L725.421 96.8724 L725.421 96.8724  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip092)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"725.421,96.8724 725.421,1751.15 947.669,1751.15 947.669,96.8724 725.421,96.8724 \"/>\n<path clip-path=\"url(#clip092)\" d=\"M947.669 441.514 L947.669 1751.15 L1169.92 1751.15 L1169.92 441.514 L947.669 441.514 L947.669 441.514  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip092)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"947.669,441.514 947.669,1751.15 1169.92,1751.15 1169.92,441.514 947.669,441.514 \"/>\n<path clip-path=\"url(#clip092)\" d=\"M1169.92 1130.8 L1169.92 1751.15 L1392.17 1751.15 L1392.17 1130.8 L1169.92 1130.8 L1169.92 1130.8  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip092)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"1169.92,1130.8 1169.92,1751.15 1392.17,1751.15 1392.17,1130.8 1169.92,1130.8 \"/>\n<path clip-path=\"url(#clip092)\" d=\"M1392.17 1268.65 L1392.17 1751.15 L1614.41 1751.15 L1614.41 1268.65 L1392.17 1268.65 L1392.17 1268.65  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip092)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"1392.17,1268.65 1392.17,1751.15 1614.41,1751.15 1614.41,1268.65 1392.17,1268.65 \"/>\n<path clip-path=\"url(#clip092)\" d=\"M1614.41 1337.58 L1614.41 1751.15 L1836.66 1751.15 L1836.66 1337.58 L1614.41 1337.58 L1614.41 1337.58  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip092)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"1614.41,1337.58 1614.41,1751.15 1836.66,1751.15 1836.66,1337.58 1614.41,1337.58 \"/>\n<path clip-path=\"url(#clip092)\" d=\"M1836.66 1544.37 L1836.66 1751.15 L2058.91 1751.15 L2058.91 1544.37 L1836.66 1544.37 L1836.66 1544.37  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip092)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"1836.66,1544.37 1836.66,1751.15 2058.91,1751.15 2058.91,1544.37 1836.66,1544.37 \"/>\n<path clip-path=\"url(#clip092)\" d=\"M2058.91 1682.22 L2058.91 1751.15 L2281.16 1751.15 L2281.16 1682.22 L2058.91 1682.22 L2058.91 1682.22  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip092)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"2058.91,1682.22 2058.91,1751.15 2281.16,1751.15 2281.16,1682.22 2058.91,1682.22 \"/>\n<path clip-path=\"url(#clip092)\" d=\"M2281.16 1682.22 L2281.16 1751.15 L2503.41 1751.15 L2503.41 1682.22 L2281.16 1682.22 L2281.16 1682.22  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip092)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"2281.16,1682.22 2281.16,1751.15 2503.41,1751.15 2503.41,1682.22 2281.16,1682.22 \"/>\n<circle clip-path=\"url(#clip092)\" style=\"fill:#009af9; stroke:none; fill-opacity:0\" cx=\"392.049\" cy=\"1061.87\" r=\"2\"/>\n<circle clip-path=\"url(#clip092)\" style=\"fill:#009af9; stroke:none; fill-opacity:0\" cx=\"614.297\" cy=\"372.586\" r=\"2\"/>\n<circle clip-path=\"url(#clip092)\" style=\"fill:#009af9; stroke:none; fill-opacity:0\" cx=\"836.545\" cy=\"96.8724\" r=\"2\"/>\n<circle clip-path=\"url(#clip092)\" style=\"fill:#009af9; stroke:none; fill-opacity:0\" cx=\"1058.79\" cy=\"441.514\" r=\"2\"/>\n<circle clip-path=\"url(#clip092)\" style=\"fill:#009af9; stroke:none; fill-opacity:0\" cx=\"1281.04\" cy=\"1130.8\" r=\"2\"/>\n<circle clip-path=\"url(#clip092)\" style=\"fill:#009af9; stroke:none; fill-opacity:0\" cx=\"1503.29\" cy=\"1268.65\" r=\"2\"/>\n<circle clip-path=\"url(#clip092)\" style=\"fill:#009af9; stroke:none; fill-opacity:0\" cx=\"1725.54\" cy=\"1337.58\" r=\"2\"/>\n<circle clip-path=\"url(#clip092)\" style=\"fill:#009af9; stroke:none; fill-opacity:0\" cx=\"1947.79\" cy=\"1544.37\" r=\"2\"/>\n<circle clip-path=\"url(#clip092)\" style=\"fill:#009af9; stroke:none; fill-opacity:0\" cx=\"2170.03\" cy=\"1682.22\" r=\"2\"/>\n<circle clip-path=\"url(#clip092)\" style=\"fill:#009af9; stroke:none; fill-opacity:0\" cx=\"2392.28\" cy=\"1682.22\" r=\"2\"/>\n<path clip-path=\"url(#clip090)\" d=\"M2255.37 209.375 L2557.52 209.375 L2557.52 105.695 L2255.37 105.695  Z\" fill=\"#ffffff\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip090)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"2255.37,209.375 2557.52,209.375 2557.52,105.695 2255.37,105.695 2255.37,209.375 \"/>\n<path clip-path=\"url(#clip090)\" d=\"M2283.11 178.271 L2449.59 178.271 L2449.59 136.799 L2283.11 136.799 L2283.11 178.271  Z\" fill=\"#009af9\" fill-rule=\"evenodd\" fill-opacity=\"1\"/>\n<polyline clip-path=\"url(#clip090)\" style=\"stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none\" points=\"2283.11,178.271 2449.59,178.271 2449.59,136.799 2283.11,136.799 2283.11,178.271 \"/>\n<path clip-path=\"url(#clip090)\" d=\"M2491.18 177.223 Q2489.38 181.852 2487.66 183.264 Q2485.95 184.676 2483.08 184.676 L2479.68 184.676 L2479.68 181.112 L2482.18 181.112 Q2483.94 181.112 2484.91 180.278 Q2485.88 179.445 2487.06 176.343 L2487.83 174.399 L2477.34 148.889 L2481.85 148.889 L2489.96 169.167 L2498.06 148.889 L2502.57 148.889 L2491.18 177.223 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /><path clip-path=\"url(#clip090)\" d=\"M2509.86 170.88 L2517.5 170.88 L2517.5 144.515 L2509.19 146.181 L2509.19 141.922 L2517.46 140.255 L2522.13 140.255 L2522.13 170.88 L2529.77 170.88 L2529.77 174.815 L2509.86 174.815 L2509.86 170.88 Z\" fill=\"#000000\" fill-rule=\"nonzero\" fill-opacity=\"1\" /></svg>\n```\n:::\n:::\n\n\nNow we can create our forest by calling the `create_tree` function we defined earlier\nwith the correct inputs per tree:\n\n::: {.cell execution_count=9}\n``` {.julia .cell-code}\nforest = vec(create_tree.(origins, growths, budbreaks, orientations));\n```\n:::\n\n\nBy vectorizing `create_tree()` over the different arrays, we end up with an array\nof trees. Each tree is a different Graph, with its own nodes, rewriting rules \nand variables. This avoids having to create a large graphs to include all the \nplants in a simulation. Below we will run a simulation, first using a sequential\napproach (i.e. using one core) and then using multiple cores in our computers (please check\nhttps://docs.julialang.org/en/v1/manual/multi-threading/ if the different cores are not being used\nas you may need to change some settings in your computer).\n\n## Sequential simulation\n\nWe can simulate the growth of each tree by applying the method `simulate` to each\ntree, creating a new version of the forest (the code below is an array comprehension)\n\n::: {.cell execution_count=10}\n``` {.julia .cell-code}\nnewforest = [simulate(tree, getInternode, 2) for tree in forest];\n```\n:::\n\n\nAnd we can render the forest with the function `render` as in the binary tree\nexample but passing the whole forest at once\n\n::: {.cell execution_count=11}\n``` {.julia .cell-code}\nrender(newforest)\n```\n\n::: {.cell-output .cell-output-display execution_count=11}\n![](index_files/figure-html/cell-12-output-1.png){}\n:::\n:::\n\n\nIf we iterate 4 more iterations we will start seeing the different individuals\ndiverging in size due to the differences in growth rates\n\n::: {.cell execution_count=12}\n``` {.julia .cell-code}\nnewforest = [simulate(tree, getInternode, 15) for tree in newforest];\nrender(newforest)\n```\n\n::: {.cell-output .cell-output-display execution_count=12}\n![](index_files/figure-html/cell-13-output-1.png){}\n:::\n:::\n\n\n## Multithreaded simulation\n\nIn the previous section, the simulation of growth was done sequentially, one tree\nafter another (since the growth of a tree only depends on its own parameters). However,\nthis can also be executed in multiple threads. In this case we use an explicit loop \nand execute the iterations of the loop in multiple threads using the macro `@threads`.\nNote that the rendering function can also be ran in parallel (i.e. the geometry will be\ngenerated separately for each plant and the merge together):\n\n::: {.cell execution_count=13}\n``` {.julia .cell-code}\nusing Base.Threads\nnewforest = deepcopy(forest)\n@threads for i in 1:length(forest)\n    newforest[i] = simulate(forest[i], getInternode, 6)\nend\nrender(newforest, parallel = true)\n```\n\n::: {.cell-output .cell-output-display execution_count=13}\n![](index_files/figure-html/cell-14-output-1.png){}\n:::\n:::\n\n\nAn alternative way to perform the simulation is to have an outer loop for each timestep and an internal loop over the different trees. Although this approach is not required for this simple model, most FSP models will probably need such a scheme as growth of each individual plant will depend on competition for resources with neighbouring plants. In this case, this approach would look as follows:\n\n::: {.cell execution_count=14}\n``` {.julia .cell-code}\nnewforest = deepcopy(forest)\nfor step in 1:15\n    @threads for i in 1:length(newforest)\n        newforest[i] = simulate(newforest[i], getInternode, 1)\n    end\nend\nrender(newforest, parallel = true)\n```\n\n::: {.cell-output .cell-output-display execution_count=14}\n![](index_files/figure-html/cell-15-output-1.png){}\n:::\n:::\n\n\n# Customizing the scene\n\nHere we are going to customize the scene of our simulation by adding a horizontal tile represting soil and\ntweaking the 3D representation. When we want to combine plants generated from graphs with any other\ngeometric element it is best to combine all these geometries in a `GLScene` object. We can start the scene\nwith the `newforest` generated in the above:\n\n::: {.cell execution_count=15}\n``` {.julia .cell-code}\nscene = Scene(newforest);\n```\n:::\n\n\nWe can create the soil tile directly, without having to create a graph. The simplest approach is two use \na special constructor `Rectangle` where one species a corner of the rectangle and two vectors defining the\ntwo sides of the vectors. Both the sides and the corner need to be specified with `Vec` just like in the\nabove when we determined the origin of each plant. VPL offers some shortcuts: `O()` returns the origin\n(`Vec(0.0, 0.0, 0.0)`), whereas `X`, `Y` and `Z` returns the corresponding axes and you can scale them by \npassing the desired length as input. Below, a rectangle is created on the XY plane with the origin as a \ncorner and each side being 11 units long:\n\n::: {.cell execution_count=16}\n``` {.julia .cell-code}\nsoil = Rectangle(length = 21.0, width = 21.0)\nrotatey!(soil, pi/2)\nVPL.translate!(soil, Vec(0.0, 10.5, 0.0))\n```\n:::\n\n\nWe can now add the `soil` to the `scene` object with the `add!` function.\n\n::: {.cell execution_count=17}\n``` {.julia .cell-code}\nVPL.add!(scene, mesh = soil, color = RGB(1,1,0))\n```\n:::\n\n\nWe can now render the scene that combines the random forest of binary trees and a yellow soil. Notice that\nin all previous figures, a coordinate system with grids was being depicted. This is helpful for debugging\nyour code but also to help setup the scene (e.g. if you are not sure how big the soil tile should be).\nHowver, it may be distracting for the visualization. It turns out that we can turn that off with\n`show_axes = false`:\n\n::: {.cell execution_count=18}\n``` {.julia .cell-code}\nrender(scene, axes = false)\n```\n\n::: {.cell-output .cell-output-display execution_count=18}\n![](index_files/figure-html/cell-19-output-1.png){}\n:::\n:::\n\n\nWe may also want to save a screenshot of the scene. For this, we need to store the output of the `render` function.\nWe can then resize the window rendering the scene, move around, zoom, etc. When we have a perspective that we like,\nwe can run the `save_scene` function on the object returned from `render`. The argument `resolution` can be adjusted in both\n`render` to increase the number of pixels in the final image. A helper function `calculate_resolution` is provided to \ncompute the resolution from a physical width and height in cm and a dpi (e.g., useful for publications and posters):\n\n::: {.cell execution_count=19}\n``` {.julia .cell-code}\nres = calculate_resolution(width = 16.0, height = 16.0, dpi = 1_000)\noutput = render(scene, axes = false, resolution = res)\nexport_scene(scene = output, filename = \"nice_trees.png\") \n```\n:::\n\n\n",
    "supporting": [
      "index_files\\figure-html"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}