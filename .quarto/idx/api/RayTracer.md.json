{"title":"Module RayTracing","markdown":{"headingText":"Module RayTracing","containsRefs":false,"markdown":"\n<a id='Module-RayTracing'></a>\n\n<a id='Module-RayTracing-1'></a>\n\n\n\n\n\n<a id='Turtle'></a>\n\n<a id='Turtle-1'></a>\n\n# Turtle\n\n<a id='VPL.RayTracing.RTTurtle' href='#VPL.RayTracing.RTTurtle'>#</a>\n**`VPL.RayTracing.RTTurtle`** &mdash; *Type*.\n\n\n\n```julia\nRTTurtle()\n```\n\nCreate a `RTTurtle()` object that will parse a `Graph` object and store the materials associated to the different primitives. This type of turtle is automatically created by calls to `RTScene()` but the user may want to separately construct the geometry and  materials and manually combine them into a `RTScene` object for performance reasons.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/RayTracer/Turtle.jl#LL2-L9' class='documenter-source'>source</a><br>\n\n<a id='VPL.RayTracing.materials' href='#VPL.RayTracing.materials'>#</a>\n**`VPL.RayTracing.materials`** &mdash; *Function*.\n\n\n\n```julia\nmaterials(turtle)\n```\n\nExtract the array of materials stored inside a `RTTurtle` object.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/RayTracer/Turtle.jl#LL14-L18' class='documenter-source'>source</a><br>\n\n<a id='VPL.RayTracing.feedmaterial!' href='#VPL.RayTracing.feedmaterial!'>#</a>\n**`VPL.RayTracing.feedmaterial!`** &mdash; *Function*.\n\n\n\n```julia\nfeedmaterial!(turtle::RTTurtle, material::Material)\n```\n\nGeneral purpose method to feed a material to a RT turtle. This should be used inside user's defined methods to add the material object with optical properties associated to the primitive.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/RayTracer/Turtle.jl#LL21-L27' class='documenter-source'>source</a><br>\n\n\n```\nfeedmaterial!(turtle::RTTurtle, node::Node)\n```\n\nDefault method for `feedmaterial!()` that does not do anything. Hence, the user can include nodes in a graph withour associated colors (the nodes should not generate geometry either).\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/RayTracer/Turtle.jl#LL30-L35' class='documenter-source'>source</a><br>\n\n\n```\nfeedmaterial!(turtle::RTTurtle, g::Graph)\n```\n\nProcess a `Graph` object with a RT turtle and collect the materials defined in the graph, in  the same order in which the 3D mesh is created by the corresponding `feedgeom!()` method.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/RayTracer/Turtle.jl#LL38-L43' class='documenter-source'>source</a><br>\n\n\n```\nfeedmaterial!(turtle::RTTurtle, collection::AbstractArray)\nfeedmaterial!(turtle::RTTurtle, collection::Tuple)\n```\n\nFeed a RT turtle an array or tuple of objects (`collection`) with existing `feedmaterial!()` methods.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/RayTracer/Turtle.jl#LL69-L74' class='documenter-source'>source</a><br>\n\n\n<a id='RTScene'></a>\n\n<a id='RTScene-1'></a>\n\n# RTScene\n\n<a id='VPL.RayTracing.Triangle-Tuple{StaticArraysCore.SVector{3}, StaticArraysCore.SVector{3}, StaticArraysCore.SVector{3}}' href='#VPL.RayTracing.Triangle-Tuple{StaticArraysCore.SVector{3}, StaticArraysCore.SVector{3}, StaticArraysCore.SVector{3}}'>#</a>\n**`VPL.RayTracing.Triangle`** &mdash; *Method*.\n\n\n\n```julia\nTriangle(p1, p2, p3)\n```\n\nCreate a ray tracing `Triangle` object given the three vertices `p1`, `p2` and `p3`.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/Geometry/Triangle.jl#LL16-L20' class='documenter-source'>source</a><br>\n\n<a id='VPL.RayTracing.Triangle-Tuple{VPL.Geom.Mesh}' href='#VPL.RayTracing.Triangle-Tuple{VPL.Geom.Mesh}'>#</a>\n**`VPL.RayTracing.Triangle`** &mdash; *Method*.\n\n\n\n```julia\nTriangle(mesh)\n```\n\nCreate a vector of ray tracing `Triangle` objects from a `Mesh` object.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/Geometry/Triangle.jl#LL27-L31' class='documenter-source'>source</a><br>\n\n<a id='VPL.RayTracing.RTScene' href='#VPL.RayTracing.RTScene'>#</a>\n**`VPL.RayTracing.RTScene`** &mdash; *Type*.\n\n\n\n```julia\nRTScene(triangles, material_ids, materials)\n```\n\nCreate a ray tracing scene for rendering from a vector of triangles (`triangles`), a vector of ids that  match each triangle to a material (`ids`) and the vector of material objects (`materials`).  This method will generally not be used by the author unless  the components of an `RTScene` were generated manually.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/RayTracer/RTScene.jl#LL2-L9' class='documenter-source'>source</a><br>\n\n<a id='VPL.add!' href='#VPL.add!'>#</a>\n**`VPL.add!`** &mdash; *Function*.\n\n\n\n```julia\nadd!(scene, mesh, material)\n```\n\nAdd a 3D mesh with a corresponding material (`mesh` and `material`) to an existing `RTScene` object (`scene`).\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/RayTracer/RTScene.jl#LL97-L101' class='documenter-source'>source</a><br>\n\n\n```julia\nadd!(scene, mesh, color)\n```\n\nManually add a 3D mesh with corresponding colors (`mesh` and `color`) to an existing `GLScene` object (`scene`).\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/Render/Scene.jl#LL65-L69' class='documenter-source'>source</a><br>\n\n\n<a id='RayTracer'></a>\n\n<a id='RayTracer-1'></a>\n\n# RayTracer\n\n<a id='VPL.RayTracing.get_nw' href='#VPL.RayTracing.get_nw'>#</a>\n**`VPL.RayTracing.get_nw`** &mdash; *Function*.\n\n\n\n```julia\nget_nw(s::Source)\n```\n\nRetrieve the number of wavelengths that rays from a source will contain.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/Sources/Source.jl#LL42-L46' class='documenter-source'>source</a><br>\n\n\n```\nget_nw(rt::RayTracer)\n```\n\nRetrieve the number of wavelengths being simulated by the ray tracer. See VPL documentation for more details on the ray tracer.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/RayTracer/RayTracer.jl#LL115-L120' class='documenter-source'>source</a><br>\n\n<a id='VPL.RayTracing.RTSettings' href='#VPL.RayTracing.RTSettings'>#</a>\n**`VPL.RayTracing.RTSettings`** &mdash; *Type*.\n\n\n\n```julia\nRTSettings(;parallel = false, pkill = 0.2, maxiter = 2, sampler = Random.Xoshiro(123456789),\n            nx = 0, ny = 0, nz = 0, dx = 0.0, dy = 0.0, dz = 0.0)\n```\n\nSettings for the ray tracer: `parallel` indicates if the raytracer will run on a single core or make use of multiple cores in the machine based on Julia's multithreading support. `pkill` is the probably that a ray is terminated by the Russian roulette after it has been scattered a `maxiter` number of times. `sampler` is the pseudo-random number generator to be used by the ray tracer. `nx` and `ny` are the number of times the scene will be clone by the grid cloner in each direction along the x and y axis (e.g., setting `nx = 1` and `ny = 1`  will generate a grid of 3 x 3 clones of the original scene), whereas `dx` and `dy` will be distance at which each new clone will be generated (along the axis). `nz` is the number of times the scene will be cloned in the vertical direction. Unlike horizontal cloning, the vertical cloning is always done in the positive direction of `z` axis and the number of clones will be exactly `nz`. See VPL documentation for more details on the ray  tracer.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/RayTracer/RayTracer.jl#LL2-L15' class='documenter-source'>source</a><br>\n\n<a id='VPL.RayTracing.RayTracer' href='#VPL.RayTracing.RayTracer'>#</a>\n**`VPL.RayTracing.RayTracer`** &mdash; *Type*.\n\n\n\n```julia\nRayTracer(acceleration, grid, materials, sources, settings)\n```\n\nCreate a ray tracer object from an acceleration structure built around a 3D mesh (`acceleration`), a grid cloner structure around the acceleration structure (`grid`), a vector of materials associated to the mesh (`materials`), a vector of sources of irradiance  (`sources`) and settings. (as generated by `RTSettings()`). See VPL documentation for more details on the ray tracer.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/RayTracer/RayTracer.jl#LL31-L37' class='documenter-source'>source</a><br>\n\n<a id='VPL.RayTracing.trace!' href='#VPL.RayTracing.trace!'>#</a>\n**`VPL.RayTracing.trace!`** &mdash; *Function*.\n\n\n\n```julia\ntrace!(rt)\n```\n\nRun the ray tracing simulations. This function will overwrite the `power` component of any material object that is included in the scene. It returns the total number of rays being traced (primary and secondary). See VPL documentation for more details on the ray tracer.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/RayTracer/RayTracer.jl#LL144-L150' class='documenter-source'>source</a><br>\n\n\n<a id='Sources'></a>\n\n<a id='Sources-1'></a>\n\n# Sources\n\n<a id='VPL.RayTracing.Source' href='#VPL.RayTracing.Source'>#</a>\n**`VPL.RayTracing.Source`** &mdash; *Type*.\n\n\n\n```julia\nSource(geom, angle, power::Number, nrays)\nSource(geom, angle, power::Tuple, nrays)\n```\n\nCreaten irradiance source given a source geometry, a source angle, the power per ray and the total number of rays to be generated from this source. When simulating more than one wavelength simultaneously, a tuple of power values should be given, of the same length as in the materials used in the scene. See VPL documentation for details on source geometries  and source angles.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/Sources/Source.jl#LL29-L38' class='documenter-source'>source</a><br>\n\n<a id='VPL.RayTracing.DirectionalSource' href='#VPL.RayTracing.DirectionalSource'>#</a>\n**`VPL.RayTracing.DirectionalSource`** &mdash; *Function*.\n\n\n\n```julia\nDirectionalSource(box::AABB, θ, Φ, power, nrays)\nDirectionalSource(scene::RTScene, θ, Φ, power, nrays)\n```\n\nCreate a Directional source (including geometry and angle components) by providing an axis-aligned bounding box (`box`) or an `RTScene` object (`scene`) as well as the zenith (`θ`) and azimuth (`Φ`) angles, the power per ray (as in `Source`) and the number of rays to be generated. See VPL documentation for details on irradiance sources.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/Sources/Directional.jl#LL2-L10' class='documenter-source'>source</a><br>\n\n<a id='VPL.RayTracing.PointSource' href='#VPL.RayTracing.PointSource'>#</a>\n**`VPL.RayTracing.PointSource`** &mdash; *Type*.\n\n\n\n```julia\nPointSource(vec)\n```\n\nCreate a point irradiance source geometry at given 3D location `vec`, defined as vector of Cartesian coordinates (`Vec(x, y, z)`).\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/Sources/SourceGeometry.jl#LL6-L11' class='documenter-source'>source</a><br>\n\n<a id='VPL.RayTracing.LineSource' href='#VPL.RayTracing.LineSource'>#</a>\n**`VPL.RayTracing.LineSource`** &mdash; *Type*.\n\n\n\n```julia\nLineSource(p, line)\n```\n\nCreate a line irradiance source geometry given an origin (`p`) and a segment (`line`) both specified as vector of Cartesian coordinates (`Vec(x, y, z)`). This will create a line source between the points `p` and `p .+ line`.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/Sources/SourceGeometry.jl#LL19-L25' class='documenter-source'>source</a><br>\n\n<a id='VPL.RayTracing.AreaSource' href='#VPL.RayTracing.AreaSource'>#</a>\n**`VPL.RayTracing.AreaSource`** &mdash; *Type*.\n\n\n\n```julia\nAreaSource(mesh)\n```\n\nCreate an area irradiance source geometry given a triangular mesh.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/Sources/SourceGeometry.jl#LL41-L45' class='documenter-source'>source</a><br>\n\n<a id='VPL.RayTracing.LambertianSource' href='#VPL.RayTracing.LambertianSource'>#</a>\n**`VPL.RayTracing.LambertianSource`** &mdash; *Type*.\n\n\n\n```julia\nLambertianSource(x, y, z)\nLambertianSource(axes)\n```\n\nCreate a Lambertian irradiance source angle by given a local coordinate system as three separate `Vec` objects representing the axes (x, y, z) or as tuple containing the three axes. Rays will be generated towards the hemisphere defined by the `z` direction. See VPL documentation for details on irradiance sources.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/Sources/SourceAngle.jl#LL19-L27' class='documenter-source'>source</a><br>\n\n<a id='VPL.RayTracing.FixedSource' href='#VPL.RayTracing.FixedSource'>#</a>\n**`VPL.RayTracing.FixedSource`** &mdash; *Type*.\n\n\n\n```julia\nFixedSource(dir)\nFixedSource(θ, Φ)\n```\n\nCreate a fixed irradiance source by given a vector with the direction of the rays (dir) or zenith (θ) and azimuth (Φ) angles.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/Sources/SourceAngle.jl#LL3-L9' class='documenter-source'>source</a><br>\n\n\n<a id='Materials'></a>\n\n<a id='Materials-1'></a>\n\n# Materials\n\n<a id='VPL.RayTracing.Sensor' href='#VPL.RayTracing.Sensor'>#</a>\n**`VPL.RayTracing.Sensor`** &mdash; *Type*.\n\n\n\n```julia\nSensor(nw::Int)\n```\n\nCreate a sensor material object to store power for `nw` wavelengths. See VPL documentation for details.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/Materials/Sensor.jl#LL11-L16' class='documenter-source'>source</a><br>\n\n<a id='VPL.RayTracing.Black' href='#VPL.RayTracing.Black'>#</a>\n**`VPL.RayTracing.Black`** &mdash; *Type*.\n\n\n\n```julia\nBlack(nw::Int)\n```\n\nCreate a black material object to store power for `nw` wavelengths. See VPL documentation for details.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/Materials/Black.jl#LL11-L16' class='documenter-source'>source</a><br>\n\n<a id='VPL.RayTracing.Lambertian' href='#VPL.RayTracing.Lambertian'>#</a>\n**`VPL.RayTracing.Lambertian`** &mdash; *Type*.\n\n\n\n```julia\nLambertian(τ::Tuple, ρ::Tuple)\nLambertian(τ::Number, ρ::Number)\n```\n\nCreate a `Lambertian` material object from the values of transmittance (`τ`) and reflectance (`ρ`). When more than one wavelength is being simulated, a tuple of values should be passed for each optical property. See VPL documentation for details.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/Materials/Lambertian.jl#LL12-L19' class='documenter-source'>source</a><br>\n\n<a id='VPL.RayTracing.Phong' href='#VPL.RayTracing.Phong'>#</a>\n**`VPL.RayTracing.Phong`** &mdash; *Type*.\n\n\n\n```julia\nPhong(τ::Number, ρd::Number, ρsmax::Number, n::Number)\nPhong(τ::Tuple, ρd::Tuple, ρsmax::Tuple, n::Number)\n```\n\nCreate a `Phong` material object from the values of transmittance (`τ`) diffuse reflectance (`ρd`), maximum Phong specular reflectance (`ρsmax`) and `n` is the specular exponent that controls the \"Phong reflectance lobe\". When more than one wavelength is being simulated, a tuple of values should be passed  for each optical property. See VPL documentation for further details.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/Materials/Phong.jl#LL13-L21' class='documenter-source'>source</a><br>\n\n<a id='VPL.RayTracing.power' href='#VPL.RayTracing.power'>#</a>\n**`VPL.RayTracing.power`** &mdash; *Function*.\n\n\n\n```julia\npower(material::Material)\n```\n\nExtract the power stored inside a material.\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/Materials/Material.jl#LL45-L49' class='documenter-source'>source</a><br>\n\n<a id='VPL.RayTracing.reset!-Tuple{VPL.RayTracing.Material}' href='#VPL.RayTracing.reset!-Tuple{VPL.RayTracing.Material}'>#</a>\n**`VPL.RayTracing.reset!`** &mdash; *Method*.\n\n\n\n```julia\nreset!(material::Material)\n```\n\nReset the power stored inside a material back to zero\n\n\n<a target='_blank' href='https://github.com/AleMorales/VPL.jl/blob/feaf2fa0a1116bed2290a39655c58f2588bfc402/src/RayTracer/Materials/Material.jl#LL27-L31' class='documenter-source'>source</a><br>\n\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"markdown"},"render":{"keep-tex":false,"keep-yaml":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"self-contained-math":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../styles.css"],"output-file":"RayTracer.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"theme":{"light":"default","dark":"darkly"}},"extensions":{"book":{"multiFile":true}}}}}